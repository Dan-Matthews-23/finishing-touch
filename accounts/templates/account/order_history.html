{% extends "base.html" %}
{% load static %}
{% block extra_css %}
{% endblock %}
{% block page_header %}
{% endblock %}
{% block content %}


<div class="container-fluid previous-orders-container">
    <div class="row previous-orders-row">
        <div class="col previous-orders-col">
            <h2 class="bold">My Orders</h2>
        </div>
    </div>
    <div class="row previous-orders-row">
        <div class="col previous-orders-col">
            <p>
                <span>Date of order:</span>
                <span>{{order.date}}</span>
            </p>
            <p>
                <span>Order Number:</span>
                <span>{{order.order_number}}</span>
            </p>
            
            {% for item in order_line_items %}
            <p>
                <span>Product Name:</span>
                <span>{{item.product}}</span>
            </p>
            <p>
                <span>Product ID:</span>
                <span>{{item.product.product_id}}</span>
            </p>
            <p>
                <span>Quantity:</span>
                <span>{{item.quantity}}</span>
            </p>
            <p>
                <span>Total</span>
                <span>{{item.order_total}}</span>
            </p>
            {% if reviews %}
                <p>You reviewed this order on {{reviews.date}}</p>
                <hr>
                <p>{{reviews.review_title}}</p> 
                <p>{{reviews.review_body}}</p>
                <p>{{reviews.stars}}</p>
            {% else %}
            <p>
                <div class="star">
                    <form method="POST" action="{% url 'leave_review' order.order_number %}" title="{{ order.order_number }}">
                        {% csrf_token %}
                        <input type="hidden" id="product_id" name="product_id" value="{{ item.product.product_id }}">

                        <button type="submit" class="star-btn" id="one_star" name="star_rating_1">
                            <i class="fa-regular fa-star fa-2xl" ></i>
                        </button>
                        <button type="submit" class="star-btn" id="two_star" name="star_rating_2">
                            <i class="fa-regular fa-star fa-2xl"></i>
                        </button>
                        <button type="submit" class="star-btn" id="three_star" name="star_rating_3">
                            <i class="fa-regular fa-star fa-2xl"></i>
                        </button>
                        <button type="submit" class="star-btn" id="four_star" name="star_rating_4">
                            <i class="fa-regular fa-star fa-2xl"></i>
                        </button>
                        <button type="submit" class="star-btn" id="five_star" name="star_rating_5">
                            <i class="fa-regular fa-star fa-2xl"></i>
                        </button>


                        <span class="startext">Add to favourites</span>
                    </form>
                </div>
            </p>           

            {% endif %}

            {% endfor %}
        </div>
    </div>
</div>







{% endblock %}

{% block postloadjs %}
<script src="{% static 'accounts/js/script.js' %}"></script>
{% endblock %}