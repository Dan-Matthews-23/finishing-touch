{% extends "base.html" %}
{% load static %}
{% block extra_css %}
{% endblock %}
{% block page_header %}
{% endblock %}
{% block content %}


<div class="container-fluid previous-orders-container">
    <div class="row previous-orders-row">
        <div class="col previous-orders-col">
            <h2 class="bold">My Orders</h2>
        </div>
    </div>
    <div class="row previous-orders-row">
        <div class="col previous-orders-col">
            <p>
                <span>Date of order:</span>
                <span>{{order.date}}</span>
            </p>
            <p>
                <span>Order Number:</span>
                <span>{{order.order_number}}</span>
            </p>

            {% for item in order_line_items %}
            <p>
                <span>Product Name:</span>
                <span>{{item.product}}</span>
            </p>
            <p>
                <span>Product ID:</span>
                <span>{{item.product.product_id}}</span>
            </p>
            <p>
                <span>Quantity:</span>
                <span>{{item.quantity}}</span>
            </p>
            <p>
                <span>Total</span>
                <span>{{item.order_total}}</span>
            </p>
            {% if reviews %}
            {% for review in reviews %}
            {{ review.review_title }} <br>
            {{ review.review_body }} <br>
            {{ review.stars }}
            {% endfor %}
            {% else %}
            <div class="rating-box">
                <header>How was your experience?</header>
                <div class="stars">
                    <form method="POST" action="{% url 'leave_review' order.order_number %}"
                        title="{{ order.order_number }}">
                        {% csrf_token %}
                        <input type="hidden" id="product_id" name="product_id" value="{{ item.product.product_id }}">
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                        <i class="fa-solid fa-star"></i>
                    </form>
                </div>
            </div>
        </div>
        </p>
        {% endif %}
        {% endfor %}
    </div>
</div>








{% endblock %}

{% block postloadjs %}
<script src="{% static 'accounts/js/script.js' %}"></script>
{% endblock %}